# 4.光照贴图

在上一章节中，我们分别将光源颜色和材质颜色分成了三个分量来更加细腻的控制物体的表现效果，这一章我们来进一步优化这部分内容。

还记得当我们学会在平面内绘制颜色之后，我们引入了纹理的概念，就是绘制图片。他可以让整个画面更加真实。这里我们也还是用之前的套路，我们要在立方体上直接绘制纹理。这样我没还可以模拟出物体上不同材质对光不同的影响。

### 漫反射贴图

事实上，所谓的漫反射贴图就是一个纹理，不过我们是使用这个纹理来代表材质系统中的环境分量和漫反射分量。接下来我们把立方体渲染成一个箱子吧。

![铁框木箱](https://learnopengl-cn.github.io/img/02/04/container2.png)

上一章中我们在材质的结构体重传入了三个分量以反光度。这章中，我们将环境分量及漫反射分量替换为漫反射纹理。以为环境分量几乎在所有情况下都等于漫反射分量。

所以我们的材质结构体变成了这个样子：

```
struct Material {
    sampler2D diffuse;
    vec3      specular;
    float     shininess;
}; 

in vec2 TexCoords;
```

当然，在纹理那一节的时候我们就提到过，要使用纹理，还要有对应的纹理坐标才可以，所以我们又添加了纹理坐标这个入参。

这里顶点数组数据、顶点着色器及片段着色器都要做相应的改变，不过跟之前入门中的纹理一节内容是一样的，这里就不做展开描述了。我们只关注我们是如何使用漫反射贴图的。

```
vec3 diffuse = light.diffuse * diff * vec3(texture(material.diffuse, TexCoords));
vec3 ambient = light.ambient * vec3(texture(material.diffuse, TexCoords));
```

上文中说过，我们会使用漫反射贴图来计算环境分量及漫反射分量。那么实现后的结果就是：

![]()